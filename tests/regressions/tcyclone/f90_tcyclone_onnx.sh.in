#!/usr/bin/env bash

set -eux

srcdir=@CMAKE_CURRENT_SOURCE_DIR@
bindir=@CMAKE_CURRENT_BINARY_DIR@
datadir=@CMAKE_BINARY_DIR@/tests/data/cyclone
exedir=@CMAKE_BINARY_DIR@/bin

eng_type=onnx

model_path=$datadir/cyclone_model_200x200.onnx
input_path=$datadir/cyclone_input_200x200.csv
#ref=$datadir/m36966_prediction.csv

# run inference and check prediction sum
# just a sanity check (independent of tensor layout)
$exedir/infero_runner_tcyclone \
$model_path \
$eng_type \
$input_path \
| tail -n 100
