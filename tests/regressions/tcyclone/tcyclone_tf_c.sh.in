#!/usr/bin/env bash

set -eux

srcdir=@CMAKE_CURRENT_SOURCE_DIR@
bindir=@CMAKE_CURRENT_BINARY_DIR@
datadir=@CMAKE_BINARY_DIR@/tests/data/cyclone
exedir=@CMAKE_BINARY_DIR@/bin


eng_type=tf_c

model_path=$datadir/cyclone_model_200x200_tf

input_path=$datadir/cyclone_input_200x200.npy
ref_pred=$datadir/cyclone_output_200x200.npy
output_path=$bindir/cyclone_output_200x200_tf_c.npy
out_shape="1,200,200,1"


# run inference
$exedir/infero.x \
--model=$model_path \
--input=$input_path \
--engine=$eng_type \
--output=$output_path \
--out_shape=$out_shape \
--ref_path=$ref_pred


